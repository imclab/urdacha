<!doctype html>
<html lang='en'>
<head>
<title></title>
<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0'>
<script src='list.js'></script>
<script src='page.js'></script>
<script src='http://mrdoob.github.com/three.js/examples/js/Detector.js'></script>
<script src='http://mrdoob.github.com/three.js/build/three.min.js'></script>
<script src='http://mrdoob.github.com/three.js/examples/js/controls/TrackballControls.js'></script>
<script src='http://mrdoob.github.com/three.js/examples/js/libs/stats.min.js'></script>
<link type='text/css' rel='stylesheet' href='page.css' />
</head>
<body>
<script>
	if ( ! Detector.webgl ) { Detector.addGetWebGLMessage(); }

	var renderer, scene, camera, controls, stats;
	var cube, plane, colors = [];
	
	var clock = new THREE.Clock();

	init();
	animate();
	
	var group;
	var scans;
	group = new THREE.Object3D();

	function init() {
		if ( ! Detector.webgl ) {
			renderer = new THREE.CanvasRenderer( { antialias: true } );
		} else {
			renderer = new THREE.WebGLRenderer( { antialias: true } );
		}
		
		var light, geometry, material, mesh, info;
			
		var container = document.body.appendChild( document.createElement( 'div' ) );	
		container.style.cssText = 'float: right; height: 400px; outline: 0px solid red; top: 0; width: 50%;';
		
		renderer.setSize( window.innerWidth * 0.5, 500 );
		renderer.shadowMapEnabled = true;
		container.appendChild( renderer.domElement );
		scene = new THREE.Scene();

		camera = new THREE.PerspectiveCamera( 40, window.innerWidth / window.innerHeight, 1, 1000 );
		camera.position.set(-30, 30, 30);
		controls = new THREE.TrackballControls( camera, renderer.domElement );
/*
		stats = new Stats();
		stats.domElement.style.cssText = 'position: absolute; top: 0px; zIndex: 100; ';
		document.body.appendChild( stats.domElement );    
*/

		window.addEventListener( 'resize', onWindowResize, false );

		light = new THREE.SpotLight( 0xffffff );
		light.position.set( 200, 400, 200 );
		
//  Assets	

		light = new THREE.DirectionalLight( 0xffffff, 1 );
		light.position.set( 1, 1, 1 ).normalize();
		scene.add( light );

		light = new THREE.DirectionalLight( 0xffffff, 1 );
		light.position.set( -1, -1, -1 ).normalize();
		scene.add( light );
		
		light = new THREE.AmbientLight( 0xffffff);
		light.color.setHSL( 0.1, 0.5, 0.3 );
		scene.add( light );		
		

		light = new THREE.SpotLight( 0xffffff, 1.5 );
		light.position.set( 100, 200, 100 );
		light.castShadow = true;
		
		light.shadowMapWidth = 2048;
		light.shadowMapHeight = 2048;
		light.shadowCameraNear = 230;
		light.shadowCameraFar = 275;
		light.shadowCameraFov = 15;		
		light.shadowDarkness = 0.2;
		scene.add( light );  	
// light.shadowCameraVisible = true;		
/*
		var css = document.body.appendChild( document.createElement('style') );
		css.innerHTML = 'body {background-color: transparent; font: 600 12pt monospace; margin: 0; overflow: hidden; text-align: center; }' +
			'a { color: #f00; text-decoration: none;}  ' +
			'button, input[type=range] { -webkit-appearance: none; background-color: silver; height:20px; opacity: 0.5; width: 80px;}' +
			'input[type="range"]::-webkit-slider-thumb {-webkit-appearance: none; background-color: #666; opacity: 0.5; width: 10px; height: 26px; }' ;
*/
		material = new THREE.MeshBasicMaterial( {color: 0xffffff, side: THREE.DoubleSide } );
		geometry = new THREE.PlaneGeometry( 100, 100, 1, 1 );
		geometry.applyMatrix( new THREE.Matrix4().makeRotationX( - Math.PI / 2 ) );
		plane = new THREE.Mesh( geometry, material );
		plane.position.y = -12;
		plane.receiveShadow = true;
		scene.add( plane );

		scans = new THREE.Object3D();
		
		geometry = new THREE.CubeGeometry( 10, 10, 10 );
		var texture = THREE.ImageUtils.loadTexture( '../images/us-ca-sf.gif' );
		material = new THREE.MeshBasicMaterial( { map: texture } );

		var cube1 = new THREE.Mesh( geometry, material );
		cube1.receiveShadow = true;
		cube1.castShadow = true;			
		// cube1.rotation.set(5, 5, 5);
		scans.add( cube1 );
		
		texture = THREE.ImageUtils.loadTexture( '../images/ch-ge.gif' );
		material = new THREE.MeshBasicMaterial( { map: texture } );
		var cube2 = new THREE.Mesh( geometry, material );
		cube2.receiveShadow = true;
		cube2.castShadow = true;		
		cube2.position.set(5, 5, 5);
		cube2.rotation.set(-10, -10, 10);
		scans.add( cube2 );		
		
		var texture = THREE.ImageUtils.loadTexture( '../images/ch-zh.gif' );
		material = new THREE.MeshBasicMaterial( { map: texture } );
		var cube3 = new THREE.Mesh( geometry, material );
		cube3.receiveShadow = true;
		cube3.castShadow = true;		
		cube3.position.set(-5, -5, -5);
		cube3.rotation.set(10, 1, -1);
		scans.add( cube3 );			
		
		scene.add( scans );
	}

	function animate() {
		requestAnimationFrame( animate );
		controls.update();
		renderer.render( scene, camera );
		// stats.update();
		var tim = clock.elapsedTime;
		
		for (var i = 0, len = scans.children.length; i < len; i++) {
			scans.children[i].rotation.x +=0.005;
			scans.children[i].rotation.y +=0.005;
			scans.children[i].position.x += 5 * Math.sin(tim);
			
			scans.rotation.x += 0.002;
		}
	}

	function colorful( arr, count) {
		var delta = 1.0 / count;
		for (var i = 0; i < count; i++ ) {
			arr.push( i *  delta );
		}
		return arr;
	}	

	function onWindowResize() {
		windowHalfX = window.innerWidth / 2;
		windowHalfY = window.innerHeight / 2;
		camera.aspect = window.innerWidth / window.innerHeight;
		camera.updateProjectionMatrix();
		renderer.setSize( window.innerWidth, window.innerHeight );
	}
	
</script>

	<h1>Welcome to the Urdacha home page.</h1>
	
	<p>In the context of the Urban Data Challenge, the Urdacha team has put together what we hope you will find to be valuable tools in the treatment and mining of big data.</p>

<p>Our work revolves around three guiding principles:
<ul><li>To create useful and impactful 3D visualizations</li>
<li>To process and analyse huge amounts of real-time data</li>
<li>To provide free, open-source tools and knowledge that anyone can use, apply to other cities or datasets and build upon.</li>
</ul></p>

<h2>Why 3D visualizations?</h2>

<p>The Urdacha team worked on the premise that cities are producing increasingly gigantic volumes of data on a daily basis. As we move forward, finding innovative ways to use and learn from this new wealth of information will allow us "unclog the arteries" with cities that are more interactive, that involve citizens in finding solutions to problems, that are more efficient, diverse and appealing.</p>

<p>Before we are able to do so, however, we are facing the challenge of processing these huge amounts of data, of bringing them down to a human scale, in addition to being constricted by the limitations of 2D.</p>
<p>Like the little girl in this video, we are still struggling with the limitations of 2D.</p>

<p>Through our project, we have been able to not only translate the datasets into meaningful information, but we have been able to create  3D visualization tools that let you double-click into the data. It helps you interact with your data and therefore your city. You can <em>see</em>, visualize, understand more information at the same time in a 3-Dimensional world.</p>

<h2>So, can I see it?</h2>

<p>The featured project today is called <strong>hAxis</strong>. hAxis provides users the opportunity for Exploratory Data Analysis through visualizations of real-time data feeds from three different cities. The possibilities in this 3D field are near limitless, and the only limitation of hAxis is the user (and bugs).</p>

<p>The main idea of hAxis is that it displays a certain number of "events" which you will see as conical symbols. These events can chart as many different metrics as are available in the dataset. hAxis therefore enables you to examine trends, to establish correlations, to identify problems, within a system.</p>

<p>hAxis is a set to display a certain number of events at any given time. So if you are looking at buses moving around San Francisco, there will constantly be 300 event symbols on the screen. Therefore, a bus who moves fastest and stops the most, is going to have more symbols on the screen. A slow bus or a bus that has come to a halt, will appear and disappear almost instantaneously.</p>

<p>An upcoming revision of the app will display allow users to select specific event types to display sequentially. This will mean, for example, only one bus symbol will appear at one time for a single bus.</p>

<p>The inherent quality of hAxis and its limitless capabilities, depend on the understanding and vision of the user. Used well, hAxis enables you to compare and contrast data in ways previously impossible thanks to the wealth of information provided to us and 3D tools.</p>

<h2>Demonstration</h2>

<p>Because the interface is still in its young age, here are some ready-for-consumption stills from hAxis that demonstrate the capacity of this tool.<

<img src=".images/geneva-d1-seq-lod-vid.png">
<img src=".images/sanFrancisco-d1-stp-load-vid.png">
<img src=".images/zurich-d1-stp-lod-vid.png">

<p>The first demonstration we have prepared for you is a look at the same metrics in all three cities.</p>

<p>The metrics chosen are:
<ul><li>Passenger load</li>
<li>Stop id</li>
<li>Route</li>
</ul></p>

<p>This means that the images are showing you what is almost a bell curve in the case of San Francisco, representing passenger loads on different buses throughout the system. If we were watching hAxis display these metrics in real time, as you can for San Francisco here [insert permalink], we could see the progression of these metrics throughout the day.</p>

<p>The second demonstration what sort of information can be found from the Readout section of hAxis.</p>

<p>In this scenario, we looked at the percent of times during the day a bus made a stop with zero passenger load:
<ul>
<li>Geneva day 1 - 8%</li>
<li>San Francisco day 1 - 5%</li>
<li>Zurich day 1 - 9%</li>
</ul>

<p>In layman's terms, this means that in Geneva on October 10th 2012, 8% of buses had, throughout the day, zero passengers on board when they made a stop. If we go further, we see that 16% of buses made stops with a passenger load of 2 or fewer. The number is 13% for San Francisco, and 14% for Zurich.</p>

<h2>What else is here?</h2>

<p>Urdacha has played around with a lot of different ideas before settling on hAxis. You might find some of these other projects fun: 
<ul>
<li>Flatland, which illustrates bunching and gaps in SF by using the NextBus data on a flat surface</li>
<li>Globes</li>
<li>Exploratory Data Analysis - what we learned as we went</li>
</ul></p>

</body>
</html>
